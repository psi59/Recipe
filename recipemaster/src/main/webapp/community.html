<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>길용이님의 Page</title>
<link rel="stylesheet"
	href="/node_modules/bootstrap/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="/css/mypage.css">
<link rel="stylesheet" href="/css/subscribe.css">
<link rel="stylesheet" href="/css/community.css">
<link rel="stylesheet" href="/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/subscribe.css">
<link rel="stylesheet"
	href="//code.jquery.com/ui/1.12.0/themes/base/jquery-ui.css">

<!-- Template css -->
<link rel="stylesheet" href="css/template/animate.css">
<link rel="stylesheet" href="css/template/main.css">

<!-- 사용자 정의 css -->
<link rel="stylesheet" href="css/common.css">
<link rel="stylesheet" href="css/userinfobox.css">
<link rel="stylesheet" href="css/signup.css">
<link rel="stylesheet" href="css/popup.css">
<link rel="stylesheet" href="css/updateImg.css">

</head>
<body>
	<!--준모_login------------------------------------------------------------------------------- -->
	<div id='login-pop-up-banner'>
		<div class="rcp-section">
			<span>로그인</span>
		</div>
		<div class="rcp-laytop rcp-laytop2"></div>
		<div class="rcp-innnersec">
			<div id="loginInputBox" class="rcp-mar rcp-info"
				style="height: 110px;">
				<input class="form-control" type="text" id="userEmail" name="email"
					placeholder="아이디 입력" /> <br /> <input class="form-control"
					type="password" id="userPassword" name="password"
					placeholder="비밀번호 입력" />
			</div>
		</div>
		<div class="rcp-sign-membership" id="userLogin"
			style="margin-top: 50px;">
			<a href="#"><span>로그인</span></a>
		</div>
	</div>
	<!--  -->

	<div id="topBtn" class="navbar navbar-inverse navbar-fixed-top">
		<div class="container rcp-container-top">
			<div class="navbar-header">
				<div class="row">
					<div class="row col-md-7 col-sm-7 col-xs-12">
						<a class="logo col-md-3 col-sm-3 hidden-xs rt-navbar-top-logo"
							href="index.html"><img src="img/logo.svg" alt="Logo"></a>
						<div
							class="input-group col-md-5 col-sm-5 col-xs-11 col-xs-offset-1 rcp-navbar-searchbar-size rt-navbar-top-searchbar">
							<input type="text" class="form-control rcp-navbar-searchbar-size"
								placeholder="레시피명, 쉐프명, 재료명" aria-describedby="basic-addon1">
							<span class="input-group-addon" id="searchBarKeyword">검색</span>
						</div>
					</div>
					<div class="col-md-4 col-sm-4 hidden-xs" style="margin-right: 2em;">
						<div class="navbar-collapse">
							<ul class="nav navbar-nav navbar-right">
								<li><a href="#"><span id="signUpTopBtn"
										class="rcp-btn-default-top">회원가입</span></a></li>
								<li id="topbarUserImg"><a href="#"><span id="TopBtn"
										class="rcp-btn-default-top">로그인</span></a></li>
							</ul>
						</div>
						<!-- 준모2 -->
						<div id="profileView" class="main-nav__dropdown profile-dropdown">
							<div class="rcp-outline">
								<div>
									<a href="#0" class="dropdown__header"><img id="profileImg"
										class="rcp-img img-circle" src="img/Chef3.jpg" /></a> <a
										id="profileEmail" href="#"
										class="dropdown__header rcp-infobox-text"></a>
									<h6 id="profileName" class="rcp-nickname"></h6>
									<a href="#0" class="dropdown__header"> <span
										id="profileGrade" class="dropdown__title rcp-infobox-text">
											<img src="img/star.png"> Master Chef
									</span>
									</a>
									<div id=Btn align="center">
										<button id="userInfoEditBtn" type="button"
											class="btn btn-default rcp-btn-nav">정보수정</button>
										<button id="logoutBtn" type="button"
											class="btn btn-default rcp-btn-nav">로그아웃</button>
									</div>
								</div>
								<!-- <nav class="dropdown__nav rcp-menuname rcp-back">
                  <a href="../mypage/mypage.html"><span class="rcp-back">내
                      레시피</span></a><a href="../writerecipe.html"><span class="rcp-back">레시피
                      쓰기</span></a><a href="#"><span class="rcp-back">구독 정보</span></a>
                </nav> -->
								<button class="infoBtn">
									<a href="/community.html">MyPage</a>
								</button>
								<button class="infoBtn">
									<a href="/writerecipe.html">Recipe 작성</a>
								</button>
							</div>
						</div>

					</div>
				</div>
			</div>
		</div>
	</div>
	<section class="rcp-fullpage">
		<section class="rcp-pagetop">
			<div>
				<img src="/img/pika.jpg" class="rcp-topimg">
				<div class="rcp-topinfo">
					<h3>길용이</h3>
					<h4>구독자수 : 194,553명</h4>
					<button class="btn btn-default rcp-topbtn">구독하기</button>
				</div>
			</div>
		</section>
		<!-- <section class="rcp-pagemiddle">
      <div>
        <p>여기는 여러가지 미리보기 들어감</p>
      </div>
    </section> -->
		<section class="rcp-pageleft">
			<div>
				<div id="tabs">
					<ul>
						<li><a href="#tabs-1">My Recipe</a></li>
						<li><a href="#tabs-2">구독중인 페이지</a></li>
					</ul>
					<div id="tabs-1">
						<div class="rcp-main-right">
							<div class="rcp-subscribe">
								<div class="rcp-subscribe-detail">

									<div class="rcp-subscribe-column">

										<div class="rcp-left-div rcp-float-left-div">
											<img class="rcp-subscribe-image" src="../img/4.jpg">
										</div>

										<!-- <div id="triangle-left"></div> -->
										<div class="rcp-right-div">
											<a href="#" class="rcp-viewMore">더보기</a>
											<div class="rcp-element-default-position">

												<div class="rcp-subscribe-recipe-profile">
													<img class="rcp-subscribe-profile img-circle"
														src="../img/pika.jpg">
													<div class="rcp-subscribe-recipe-name">
														<p class="rcp-subscribe-p-tag">
															<b>닭가슴살 샐러드 레시피</b>
														</p>
														<h6 style="color: #9a9a9a">2016.08.15 오후 03:20:11 게시됨
														</h6>
													</div>
													<p class="rcp-first-p-margin">빵같아 보이기도 생선같아 보이기도 한다 !</p>

												</div>
												<div class="rcp-subscribe-preview">
													<p class="rcp-subscribe-preview-p-tag">최신 레시피</p>

													<img class="rcp-subscribe-preview-image" src="../img/2.jpg">
													<img class="rcp-subscribe-preview-image" src="../img/3.jpg">
													<img class="rcp-subscribe-preview-image" src="../img/4.jpg">

												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="rcp-subscribe">
								<div class="rcp-subscribe-detail">

									<div class="rcp-subscribe-column">

										<div class="rcp-left-div rcp-float-left-div">
											<img class="rcp-subscribe-image" src="../img/4.jpg">
										</div>

										<!-- <div id="triangle-left"></div> -->
										<div class="rcp-right-div">
											<a href="#" class="rcp-viewMore">더보기</a>
											<div class="rcp-element-default-position">

												<div class="rcp-subscribe-recipe-profile">
													<img class="rcp-subscribe-profile img-circle"
														src="../img/profile1.jpg">
													<div class="rcp-subscribe-recipe-name">
														<p class="rcp-subscribe-p-tag">
															<b>스테이크 레시피</b>
														</p>
														<h6 style="color: #9a9a9a">2016.08.15 오후 03:20:11 게시됨
														</h6>
													</div>
													<p class="rcp-first-p-margin">빵같아 보이기도 생선같아 보이기도 한다 !</p>

												</div>
												<div class="rcp-subscribe-preview">
													<p class="rcp-subscribe-preview-p-tag">최신 레시피</p>

													<img class="rcp-subscribe-preview-image" src="../img/2.jpg">
													<img class="rcp-subscribe-preview-image" src="../img/3.jpg">
													<img class="rcp-subscribe-preview-image" src="../img/4.jpg">

												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div id="tabs-2">
						<div class="rcp-main-right">
							<div class="rcp-subscribe">
								<div class="rcp-subscribe-detail">

									<div class="rcp-subscribe-column">

										<div class="rcp-left-div rcp-float-left-div">
											<img class="rcp-subscribe-image" src="../img/4.jpg">
										</div>

										<!-- <div id="triangle-left"></div> -->
										<div class="rcp-right-div">
											<a href="#" class="rcp-viewMore">더보기</a>
											<div class="rcp-element-default-position">

												<div class="rcp-subscribe-recipe-profile">
													<img class="rcp-subscribe-profile img-circle"
														src="../img/pika.jpg">
													<div class="rcp-subscribe-recipe-name">
														<p class="rcp-subscribe-p-tag">
															<b>길용이</b>
														</p>
														<h6 style="color: #9a9a9a">2016.08.15 오후 03:20:11 게시됨
														</h6>
													</div>
													<p class="rcp-first-p-margin">빵같아 보이기도 생선같아 보이기도 한다 !</p>

												</div>
												<div class="rcp-subscribe-preview">
													<p class="rcp-subscribe-preview-p-tag">길용이님의 인기레시피</p>

													<img class="rcp-subscribe-preview-image" src="../img/2.jpg">
													<img class="rcp-subscribe-preview-image" src="../img/3.jpg">
													<img class="rcp-subscribe-preview-image" src="../img/4.jpg">

												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="rcp-subscribe">
								<div class="rcp-subscribe-detail">

									<div class="rcp-subscribe-column">

										<div class="rcp-left-div rcp-float-left-div">
											<img class="rcp-subscribe-image" src="../img/4.jpg">
										</div>

										<!-- <div id="triangle-left"></div> -->
										<div class="rcp-right-div">
											<a href="#" class="rcp-viewMore">더보기</a>
											<div class="rcp-element-default-position">

												<div class="rcp-subscribe-recipe-profile">
													<img class="rcp-subscribe-profile img-circle"
														src="../img/profile1.jpg">
													<div class="rcp-subscribe-recipe-name">
														<p class="rcp-subscribe-p-tag">
															<b>암캐</b>
														</p>
														<h6 style="color: #9a9a9a">2016.08.15 오후 03:20:11 게시됨
														</h6>
													</div>
													<p class="rcp-first-p-margin">빵같아 보이기도 생선같아 보이기도 한다 !</p>

												</div>
												<div class="rcp-subscribe-preview">
													<p class="rcp-subscribe-preview-p-tag">고재현님의 인기레시피</p>

													<img class="rcp-subscribe-preview-image" src="../img/2.jpg">
													<img class="rcp-subscribe-preview-image" src="../img/3.jpg">
													<img class="rcp-subscribe-preview-image" src="../img/4.jpg">

												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<section class="rcp-pageright">
			<div>
				<div class="rcp-Vst-write">
					<div class="inputWrite">
						<textarea id="rcp-rpcontent" rows="3" cols="25"
							style="resize: none;" placeholder="방명록을 입력해주세요"></textarea>
						<button id="rcp-rpBtn" class="rcp-Vst-inputBtn btn btn-default">등록</button>
					</div>
				</div>
			</div>
			<section class="Vst" id="Vst">
				<!-- 방명록  -->
			</section>
		</section>
		<div style="height: 1100px;"></div>
		<div id="quick"
			style="position: absolute; top: 350px; border: solid 3px #6799FF; width: 150px; height: 480px; text-align: center; color: #6799FF;">
			최근 방문한 페이지</div>
	</section>
	<script src="node_modules/jquery/dist/jquery.min.js"></script>
	<script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
	<script src="js/template/jquery-ui-1.12.0/jquery-ui.min.js"></script>
	<script src="node_modules/handlebars/dist/handlebars.min.js"></script>

	<script src="js/community.js"></script>



	<script src="node_modules/blueimp-load-image/js/load-image.all.min.js"></script>
	<script
		src="node_modules/blueimp-canvas-to-blob/js/canvas-to-blob.min.js"></script>
	<!-- <script src="js/jquery.iframe-transport.js"></script> -->
	<script
		src="node_modules/blueimp-file-upload/js/vendor/jquery.ui.widget.js"></script>
	<script src="node_modules/blueimp-file-upload/js/jquery.fileupload.js"></script>
	<script
		src="node_modules/blueimp-file-upload/js/jquery.fileupload-process.js"></script>
	<script
		src="node_modules/blueimp-file-upload/js/jquery.fileupload-image.js"></script>
	<script
		src="node_modules/blueimp-file-upload/js/jquery.fileupload-validate.js"></script>

	<!--  사용자 js -->
	<script src="js/jquery.bpopup.min.js"></script>
	<script src="js/common.js"></script>
	<script src="js/signup.js"></script>
	<script src="js/login.js"></script>
	<script src="js/updateUser.js"></script>

	<script id="visitor-template" type="text/x-handlebars-template">
  {{#each data}}
    <div class="rcp-Vst" name="rcp-Vst">
          <div class="rcp-Vst-top">
            <img class="rcp-Vst-img img-circle" src="/img/pika.jpg" />
            <div class="rcp-Vst-common">
              <span id="editBtn1"><a href="#"><img class="vstUpdateBtn"
                src="/img/vstUpdateBtn.png" data-index="{{visitorNo}}"></a></span> 
              <a href="#"><img class="vstDeleteBtn" name="vstDeleteBtn" data-index="{{visitorNo}}"
                src="/img/vstDeleteBtn.png"></a> <span id="rcp-Vst-id" class="rcp-Vst-id">{{visitorNo}}</span><br>
              &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp<span id="rcp-Vst-time">{{visitorDate}}</span>
            </div>
          </div>
          <div class="rcp-Vst-bottom" id="vst-contents">
            <div class="rcp-Vst-contents">
              <p>{{visitorContent}}</p>
            </div>
          </div>
            <div class="rcp-Vst-slotRp">
              <!---->
            </div>
          </div>
        </div>
  {{/each}}
  </script>
	<script>
    var sourceVisitor = $('#visitor-template').html();
    var templateVisitor = Handlebars.compile(sourceVisitor);
    
    loadVisitor();
    
    function loadVisitor(){
      $.ajax({
        url :'/visitor/list.json',
        dataType : 'json',
        method : 'get',
        success : function(result) {
          if (result.status != 'success') {
            alert('실행 중 오류 발생');
            return;
          }

          $('#Vst').append(templateVisitor(result));
        },
        error : function() {
          alert('서버 요청 오류!...')
        }
      }); 
    }  
      $(document).on('click','.vstDeleteBtn',function(event) {
    	  if (confirm("게시물을 삭제하시겠습니까?")) {
    		  $.getJSON('visitor/delete.json?no=' + $(this).attr('data-index'),
    		           function(result) {
    		          if (result.status != 'success') {
    		              alert('게시물 삭제 오류');
    		              return;
    		            }
    		          $(this).parent().parent().parent().parent().remove();
    		          $('#Vst>').remove(); 
    		            loadVisitor();
    		  });
    	  } else{
              return;
        }
     });
      
      /* Add */
      $('#rcp-rpBtn').click(function() {
    	  console.log($('#rcp-rpcontent'));
      $.ajax({
        url : 'visitor/add.json',
        method : 'post',
        data : {
        	visitorUserNo : eval(sessionStorage.getItem('data'))[0].userNo,  
          visitorContent : $('#rcp-rpcontent').val()
        },
        dataType : 'json',
        success : function(result) {
          if (result.status != 'success') {
            alert('등록 오류입니다.');
            return;
          }
          $('#Vst>').remove(); 
          loadVisitor(); // 테이블 데이터를 갱신한다.
        },
        error : function() {
          alert('서버 요청 오류 !')
        }
      })
    });
      
    /* 업데이트 */
    
      $(document).on('click','.vstUpdateBtn',function(event) {
      event.preventDefault();
            $('#vst-contents').html(
                    '<div class="rcp-Vst-contents"><textarea id="updatevContent" rows="3" cols="34" placeholder="편집해주세요" style="resize:none;"></textarea></div>');
            $('#editBtn1').html('<img class="vstUpdateBtn" id="vstConfirmBtn" data-index="'+$(this).attr('data-index')+' "'+
                'src="/img/vstConfirmBtn.png">')
          });
   
	    $(document).on('click','#vstConfirmBtn',function(event) {
	      event.preventDefault();
	      $.post('visitor/update.json', 
	    	{
	    	  visitorNo : $(this).attr('data-index'),
	        visitorContent : $('#updatevContent').val()
	      }, function(result) {
	    	  $('#vst-contents').html(
              '<div class="rcp-Vst-contents"><p id="updatevContent">{{visitorContent}}</p></div>');
	    	  $('#editBtn1').html('<a href="#"><img class="vstUpdateBtn"'+
	                  'src="/img/vstUpdateBtn.png" data-index="{{visitorNo}}"></a>')
	    	  
	        if (result.status != 'success') {
	          alert('변경 오류입니다.');
	          return;
	        }
	    	  $('#Vst>').remove(); 
	          loadVisitor(); // 테이블 데이터를 갱신한다.
	      }, 'json');
	    });
	      
  </script>

	<script>
    $(function() {
      //getWeather();
      //getRealTimeRank();

      /* 준모3 */
      if (eval(sessionStorage.getItem('data'))[0].userNo != null) {

        $('#topbarUserImg')
            .html(
                "<img class='rcp-barimg dropdown-trigger img-circle' src='img/Chef3.jpg' />");

      }

      $('.profile-dropdown:has(.active)').bind('click', function() {

      });

      $(window).bind('scroll', function(e) {
        $('.main-nav__dropdown').removeClass('active');
      });

      $('.dropdown-trigger')
          .on(
              'click',
              function(event) {
                event.preventDefault();
                dropdownClick('.profile-dropdown',
                    '.mobile-menu-dropdown');
                /* 용이 추가() */
                if (eval(sessionStorage.getItem('data'))[0].userNo != null) {
                  $('#profileEmail')
                      .text(
                          eval(sessionStorage
                              .getItem('data'))[0].email);
                  $('#profileName')
                      .text(
                          eval(sessionStorage
                              .getItem('data'))[0].userName);
                  $('#profileGrade')
                      .text(
                          eval(sessionStorage
                              .getItem('data'))[0].recipeUrl);
                  /* 용이 추가() */
                  $('#introduce')
                      .text(
                          eval(sessionStorage
                              .getItem('data'))[0].intro);
                }
              });
      $('.dropdown-trigger').on('scroll', function() {
        dropdownClick('.profile-dropdown', '.mobile-menu-dropdown');
      });

      $('.dropdown-trigger--mobile').on('click', function() {
        dropdownClick('.mobile-menu-dropdown', '.profile-dropdown');
      });
  });
  </script>
</body>
</html>