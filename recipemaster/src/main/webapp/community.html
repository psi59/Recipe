<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>길용이님의 Page</title>
<link rel="stylesheet"
	href="/node_modules/bootstrap/dist/css/bootstrap.min.css">
<link rel="stylesheet"
	href="/node_modules/sweetalert/dist/sweetalert.css">
<link rel="stylesheet" href="/css/mypage.css">
<link rel="stylesheet" href="/css/subscribe.css">
<link rel="stylesheet" href="/css/community.css">
<link rel="stylesheet" href="/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/subscribe.css">
<link rel="stylesheet"
	href="//code.jquery.com/ui/1.12.0/themes/base/jquery-ui.css">

<!-- Template css -->
<link rel="stylesheet" href="css/template/animate.css">
<link rel="stylesheet" href="css/template/main.css">

<!-- 사용자 정의 css -->
<link rel="stylesheet" href="css/common.css">
<link rel="stylesheet" href="css/userinfobox.css">
<link rel="stylesheet" href="css/signup.css">
<link rel="stylesheet" href="css/popup.css">
<link rel="stylesheet" href="css/updateImg.css">
<style>
</style>
</head>
<body>

  

	<!--준모_login------------------------------------------------------------------------------- -->
	<div id='login-pop-up-banner'>
		<div class="rcp-section">
			<span>로그인</span>
		</div>
		<div class="rcp-laytop rcp-laytop2"></div>
		<div class="rcp-innnersec">
			<div id="loginInputBox" class="rcp-mar rcp-info"
				style="height: 110px;">
				<input class="form-control" type="text" id="userEmail" name="email"
					placeholder="아이디 입력" /> <br /> <input class="form-control"
					type="password" id="userPassword" name="password"
					placeholder="비밀번호 입력" />
			</div>
		</div>
		<div class="rcp-sign-membership" id="userLogin"
			style="margin-top: 50px;">
			<a href="#"><span>로그인</span></a>
		</div>
	</div>
	<!--  -->

	<div id="topBtn" class="navbar navbar-inverse navbar-fixed-top">
		<div class="container rcp-container-top">
			<div class="navbar-header">
				<div class="row">
					<div class="row col-md-7 col-sm-7 col-xs-12">
						<a class="logo col-md-3 col-sm-3 hidden-xs rt-navbar-top-logo"
							href="index.html"><img src="img/logo.svg" alt="Logo"></a>
						<div
							class="input-group col-md-5 col-sm-5 col-xs-11 col-xs-offset-1 rcp-navbar-searchbar-size rt-navbar-top-searchbar">
							<input type="text" class="form-control rcp-navbar-searchbar-size"
								placeholder="레시피명, 쉐프명, 재료명" aria-describedby="basic-addon1">
							<span class="input-group-addon" id="searchBarKeyword">검색</span>
						</div>
					</div>
					<div class="col-md-4 col-sm-4 hidden-xs" style="margin-right: 2em;">
						<div class="navbar-collapse">
							<ul class="nav navbar-nav navbar-right">
								<li><a href="#"><span id="signUpTopBtn"
										class="rcp-btn-default-top">회원가입</span></a></li>
								<li id="topbarUserImg"><a href="#"><span id="TopBtn"
										class="rcp-btn-default-top">로그인</span></a></li>
							</ul>
						</div>
						<!-- 준모2 -->
						<div id="profileView" class="main-nav__dropdown profile-dropdown">
							<div class="rcp-outline">
								<div>
									<a href="#0" class="dropdown__header"><img id="profileImg"
										class="rcp-img img-circle" src="img/Chef3.jpg" /></a> <a
										id="profileEmail" href="#"
										class="dropdown__header rcp-infobox-text"></a>
									<h6 id="profileName" class="rcp-nickname"></h6>
									<a href="#0" class="dropdown__header"> <span
										id="profileGrade" class="dropdown__title rcp-infobox-text">
											<img src="img/star.png"> Master Chef
									</span>
									</a>
									<div id=Btn align="center">
										<button id="userInfoEditBtn" type="button"
											class="btn btn-default rcp-btn-nav">정보수정</button>
										<button id="logoutBtn" type="button"
											class="btn btn-default rcp-btn-nav">로그아웃</button>
									</div>
								</div>
								<!-- <nav class="dropdown__nav rcp-menuname rcp-back">
                  <a href="../mypage/mypage.html"><span class="rcp-back">내
                      레시피</span></a><a href="../writerecipe.html"><span class="rcp-back">레시피
                      쓰기</span></a><a href="#"><span class="rcp-back">구독 정보</span></a>
                </nav> -->
								<button class="infoBtn">
									<a href="/community.html">MyPage</a>
								</button>
								<button class="infoBtn">
									<a href="/writerecipe.html">Recipe 작성</a>
								</button>
							</div>
						</div>

					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- 회원정보수정 bpopup -->
	<div id='editUserInfo-pop-up-banner'>
		<form action="user/update.do" method="post" id="updateUserForm"
			enctype="multipart/form-data">
			<input type="hidden" name="userNo" id="updateFormUserNo"> <input
				type="hidden" name="email" id="updateFormEmail">
			<div class="rcp-laytop">
				<!--유저 이미지 업로드 --용이  !!!!!enctype?????16.08.12-->
				<div class="rcp-up-preview img-wrapper col-md-1"></div>
				<div class="file-upload-wrapper">
					<input id="profileImage" type="file" name="profileImage"
						class="file-upload-native" accept="image/*" /> <input type="text"
						disabled placeholder="이미지" class="file-upload-text" />
				</div>
				<!--유저 이미지 업로드 끝--용이  -->
				<div class="col-md-11 rcp-laytext">
					<h4 id="updateBoxName"></h4>
					<h5 id="updateBoxGrade">Master Chef</h5>
					<h5 id="updateBoxEmail"></h5>
				</div>
			</div>
			<div class="rcp-section">
				<span>회원정보수정</span>
			</div>
			<div class="rcp-innnersec">
				<div id="beforePwd-div"
					class="rcp-mar rcp-info form-group form-group-md has-warning has-feedback">
					<input class="form-control" type="password" id="beforePwd"
						name="beforePassword" placeholder="이전비밀번호 입력">
				</div>

				<div id="afterPwd-div"
					class="rcp-mar rcp-info form-group form-group-md has-warning has-feedback">
					<input class="form-control" type="password" id="afterPwd"
						name="password" placeholder="변경비밀번호 입력">
				</div>

				<div id="afterPwdcf-div"
					class="rcp-mar rcp-info form-group form-group-md has-warning has-feedback">
					<input class="form-control" type="password" id="afterPwdcf"
						placeholder="변경비밀번호 확인">
				</div>

				<div
					class="rcp-mar rcp-info form-group form-group-md has-success has-feedback">
					<textarea class="form-control rcp-tara" rows="5rem" cols="30rem"
						id="introduce" name="intro" placeholder="자기소개를 입력해주세요"></textarea>
				</div>
			</div>
			<div class="rcp-sign-membership">
				<!-- <button id="updateUserInfo" type="submit">확인</button> -->
				<a href="#"><span id="updateUserInfo">확인</span></a> <a href="#"><span
					id="updateUserReset">취소</span></a>
			</div>
		</form>
	</div>
	<!--  -->
	<section class="rcp-fullpage">
		<section class="rcp-pagetop">
			<div>
				<img src="/img/pika.jpg" class="rcp-topimg">
				<div class="rcp-topinfo">

					<h3 class="rcp-userName">길용이</h3>
					<h4>구독자수 : 194,553명</h4>

					<button class="btn btn-default rcp-topbtn">구독하기</button>
				</div>
			</div>
		</section>
		
		<section class="rcp-pagemiddle1">
      <div  class="rcp-pagemiddle-div1">
              <img class="rcp-pagemiddle-div-img"  src="img/profileImg/users.png">
              <span class="heading">방문자</span>
              <span class="value">1234명</span>
      </div>
      <div class="rcp-pagemiddle-div2">
      <img class="rcp-pagemiddle-div-img" src="img/profileImg/like-1.png">
              <span class="heading">좋아요</span>
              <span class="value">12개</span>
      </div>
      <div class="rcp-pagemiddle-div3">
      <img class="rcp-pagemiddle-div-img" src="img/profileImg/attachment.png">
              <span class="heading">스크랩</span>
              <span class="value">124개</span>
      </div>
      <div class="rcp-pagemiddle-div4">
      <img class="rcp-pagemiddle-div-img" src="img/profileImg/star-1.png">
              <span class="heading">평점</span>
              <span class="value">4점</span>
      </div>
    </section>
    
    <!-- page hidden -->
    <input id="rcpList-pageNo" type="hidden" value="1">
    
		<section class="rcp-pageleft">


			<div>
				<div id="tabs" class="rcp-vst-tabs">

					<ul>
						<li><a href="#tabs-1">My Recipe</a></li>
						<li><a href="#tabs-2">구독중인 페이지</a></li>
					</ul>
					<div id="tabs-1">
						<div class="rcp-main-right">
							<div class="rcp-subscribe"></div>
						</div>
					</div>
					<div id="tabs-2">
						<div class="rcp-main-right">
							<div class="rcp-subscribe"></div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<section class="rcp-pageright">
			<div>
				<div class="rcp-Vst-write">
					<div class="inputWrite">
						<textarea id="rcp-rpcontent" rows="3" cols="25"
							style="resize: none;" placeholder="방명록을 입력해주세요"></textarea>
						<button id="rcp-rpBtn" class="rcp-Vst-inputBtn btn btn-default">등록</button>
					</div>
				</div>
			</div>
			<section class="Vst" id="Vst">
				<!-- 방명록  -->
			</section>
		</section>
		<div style="height: 1100px;"></div>
		<div id="quick"
			style="position: absolute; top: 350px; border: solid 3px #6799FF; width: 150px; height: 480px; text-align: center; color: #6799FF;">
			최근 방문한 페이지</div>
	</section>
	<script src="node_modules/jquery/dist/jquery.min.js"></script>
	<script src="node_modules/sweetalert/dist/sweetalert.min.js"></script>
	<script src="node_modules/sweetalert/dist/sweetalert-dev.js"></script>
	<script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
	<script src="js/template/jquery-ui-1.12.0/jquery-ui.min.js"></script>
	<script src="node_modules/handlebars/dist/handlebars.min.js"></script>

	<script src="node_modules/blueimp-load-image/js/load-image.all.min.js"></script>
	<script
		src="node_modules/blueimp-canvas-to-blob/js/canvas-to-blob.min.js"></script>
	<!-- <script src="js/jquery.iframe-transport.js"></script> -->
	<script
		src="node_modules/blueimp-file-upload/js/vendor/jquery.ui.widget.js"></script>
	<script src="node_modules/blueimp-file-upload/js/jquery.fileupload.js"></script>
	<script
		src="node_modules/blueimp-file-upload/js/jquery.fileupload-process.js"></script>
	<script
		src="node_modules/blueimp-file-upload/js/jquery.fileupload-image.js"></script>
	<script
		src="node_modules/blueimp-file-upload/js/jquery.fileupload-validate.js"></script>

	<!--  사용자 js -->
	<script src="js/jquery.bpopup.min.js"></script>
	<script src="js/common.js"></script>
	<script src="js/signup.js"></script>
	<script src="js/login.js"></script>
	<script src="js/updateUser.js"></script>

	<script id="visitor-template" type="text/x-handlebars-template">
  {{#each data}}
    <div class="rcp-Vst" name="rcp-Vst">
          <div class="rcp-Vst-top">
            <img class="rcp-Vst-img img-circle" src="/img/pika.jpg" />
            <div class="rcp-Vst-common">
              <span class="editBtn1" data-index="{{visitorNo}}"><a href="#"><img class="vstUpdateBtn"
                src="/img/vstUpdateBtn.png" data-index="{{visitorNo}}"></a></span> 
              <a href="#"><img class="vstDeleteBtn" name="vstDeleteBtn" data-index="{{visitorNo}}"
                src="/img/vstDeleteBtn.png"></a> <span id="rcp-Vst-id" class="rcp-Vst-id">{{visitorNo}}</span><br>
              &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp<span id="rcp-Vst-time">{{visitorDate}}</span>
            </div>
          </div>
          <div class="rcp-Vst-bottom vst-contents" id="vst-contents" data-index="{{visitorNo}}">
            <div class="rcp-Vst-contents">
              <p>{{visitorContent}}</p>
            </div>
          </div>
            <div class="rcp-Vst-slotRp">
              <!---->
            </div>
          </div>
        </div>
  {{/each}}
  </script>
	<script id="subscribe-recipe-template"
		type="text/x-handlebars-template">
 {{#each data}}
   <div class="rcp-subscribe-detail">
      <div class="rcp-subscribe-column">
          <div class="rcp-left-div rcp-float-left-div">
            <img class="rcp-subscribe-image" src="../img/4.jpg">
          </div>
          <!-- <div id="triangle-left"></div> -->
          <div class="rcp-right-div">
          <a href="#" class="rcp-viewMore">더보기</a>
            <div class="rcp-element-default-position">
           
               <div class="rcp-subscribe-recipe-profile">
                <img class="rcp-subscribe-profile img-circle" src="../img/profile1.jpg"> 
                <div class="rcp-subscribe-recipe-name">
                <p class="rcp-subscribe-p-tag"><b>{{recipeName}}</b></p>
                <h6 style="color:#9a9a9a">{{recipeDate}} 게시됨 </h6>
                </div>
                <p class="rcp-first-p-margin"> 빵같아 보이기도 한다 !</p> 
               </div> 
               <div class="rcp-subscribe-preview">
               <p class="rcp-subscribe-preview-p-tag">최신 레시피</p>
               <img class="rcp-subscribe-preview-image" src="../img/2.jpg">
                <img class="rcp-subscribe-preview-image" src="../img/3.jpg">
                 <img class="rcp-subscribe-preview-image" src="../img/4.jpg">
               </div>
            </div>
          </div>
        </div>
      </div>
  {{/each}}
</script>
	<script id="comRcpList-template" type="text/x-handlebars-template">
 {{#each data}}

<div class="rcp-subscribe-detail">
      <div class="rcp-subscribe-column">
          <div class="rcp-left-div rcp-float-left-div">
            <img class="rcp-subscribe-image" src="../img/3.jpg">
          </div>
          <!-- <div id="triangle-left"></div> -->
          <div class="rcp-right-div">
          <a href="#" class="rcp-viewMore">더보기</a>
            <div class="rcp-element-default-position">
           
               <div class="rcp-subscribe-recipe-profile">
                <img class="rcp-subscribe-profile img-circle" src="../img/profile1.jpg"> 
                <div class="rcp-subscribe-recipe-name">
                <p class="rcp-subscribe-p-tag"><b>{{recipeName}}</b></p>
                <h6 style="color:#9a9a9a">{{recipeDate}} 게시됨 </h6>
                </div>
                <p class="rcp-first-p-margin">{{intro}}</p> 
               </div> 
               <div class="rcp-subscribe-preview">
               <p class="rcp-subscribe-preview-p-tag">각종 정보 좋아요/스크랩/평점등등</p>
               <img class="rcp-subscribe-preview-image" src="../img/2.jpg">
                <img class="rcp-subscribe-preview-image" src="../img/3.jpg">
                 <img class="rcp-subscribe-preview-image" src="../img/4.jpg">
               </div>
            </div>
          </div>
        </div>
      </div>
 {{/each}}
  </script>
<script>
$(window).scroll(function() { 
    if ($(window).scrollTop() == $(document).height() - $(window).height()) {
    	rcpListScrollAppend();
    }
      /* 준모3 */
});
</script>
<script> 
$(function(){
	loadComRcpList();	
});

function loadComRcpList(){ 
	
	var userNo = 0; 
	  var a = eval(sessionStorage.getItem('data'));   
	  if(a != null){
	    userNo = eval(sessionStorage.getItem('data'))[0].userNo;
	  }
	  
	  var source = $('#comRcpList-template').text();
	  var template = Handlebars.compile(source);  
	  $.ajax({
	    url : 'recipe/comList.json',
	    method : 'post',
	    data : {
	      userNo : userNo
	    },
	    dataType : 'json',
	    success : function(result) {
	      if (result.status != 'success') {
	        swal('실패 ~');
	        return;
	      }
	      //$('#search-result > div').remove();    
	      $('#tabs-1 .rcp-subscribe').append(template(result));
	      $('#rcpList-pageNo').attr('value', '1');
	    },
	    error : function() {
	      swal('더이상 데이터가 없습니다.')
	    }
	  })  
	}
</script>
<script>
function rcpListScrollAppend(){ 
	var userNo = 0; 
	  var a = eval(sessionStorage.getItem('data'));   
	  if(a != null){
	    userNo = eval(sessionStorage.getItem('data'))[0].userNo;
	  }
	  if(isNaN(parseInt($('#rcpList-pageNo').val())+1)){
		  return;
	  }
	  var source = $('#comRcpList-template').text();
	  var template = Handlebars.compile(source);  
	   
	  $.ajax({
	    url : 'recipe/comList.json',
	    method : 'post',
	    data : {
	      userNo : userNo,
	      pageNo : parseInt($('#rcpList-pageNo').val())+1
	    },
	    dataType : 'json',
	    success : function(result) {
	      if (result.status != 'success') {
	        swal('실패 ~');
	        return;
	      }
	      $('#tabs-1 .rcp-subscribe').append(template(result));     
	      $('#rcpList-pageNo').val(result.pageNo);
	    },
	    error : function() {
	      swal('오호라~','더이상 데이터가 없습니다.')
	    }
	  })  
	}
</script>

	<script src="js/subscribe.js"></script>
	<script src="js/community.js"></script>
</body>
</html>