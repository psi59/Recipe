<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>길용이님의 Page</title>
<link rel="stylesheet"
	href="/node_modules/bootstrap/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="/css/mypage.css">
<link rel="stylesheet" href="/css/subscribe.css">
<link rel="stylesheet" href="/css/community.css">
<link rel="stylesheet" href="/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/subscribe.css">
<link rel="stylesheet"
	href="//code.jquery.com/ui/1.12.0/themes/base/jquery-ui.css">
<link rel="stylesheet" href="/resources/demos/style.css">
<style>
</style>
</head>
<body>
	<section class="rcp-fullpage">
		<section class="rcp-pagetop">
			<div>
				<img src="/img/pika.jpg" class="rcp-topimg">
				<div class="rcp-topinfo">
					<h3>길용이</h3>
					<h4>구독자수 : 194,553명</h4>
					<button class="btn btn-default rcp-topbtn">구독하기</button>
				</div>
			</div>
		</section>
		<!-- <section class="rcp-pagemiddle">
      <div>
        <p>여기는 여러가지 미리보기 들어감</p>
      </div>
    </section> -->
		<section class="rcp-pageleft">
			<div>
				<div id="tabs">
					<ul>
						<li><a href="#tabs-1">My Recipe</a></li>
						<li><a href="#tabs-2">구독중인 페이지</a></li>
					</ul>
					<div id="tabs-1">
						<div class="rcp-main-right">
							<div class="rcp-subscribe">
								<div class="rcp-subscribe-detail">

									<div class="rcp-subscribe-column">

										<div class="rcp-left-div rcp-float-left-div">
											<img class="rcp-subscribe-image" src="../img/4.jpg">
										</div>

										<!-- <div id="triangle-left"></div> -->
										<div class="rcp-right-div">
											<a href="#" class="rcp-viewMore">더보기</a>
											<div class="rcp-element-default-position">

												<div class="rcp-subscribe-recipe-profile">
													<img class="rcp-subscribe-profile img-circle"
														src="../img/pika.jpg">
													<div class="rcp-subscribe-recipe-name">
														<p class="rcp-subscribe-p-tag">
															<b>닭가슴살 샐러드 레시피</b>
														</p>
														<h6 style="color: #9a9a9a">2016.08.15 오후 03:20:11 게시됨
														</h6>
													</div>
													<p class="rcp-first-p-margin">빵같아 보이기도 생선같아 보이기도 한다 !</p>

												</div>
												<div class="rcp-subscribe-preview">
													<p class="rcp-subscribe-preview-p-tag">최신 레시피</p>

													<img class="rcp-subscribe-preview-image" src="../img/2.jpg">
													<img class="rcp-subscribe-preview-image" src="../img/3.jpg">
													<img class="rcp-subscribe-preview-image" src="../img/4.jpg">

												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="rcp-subscribe">
								<div class="rcp-subscribe-detail">

									<div class="rcp-subscribe-column">

										<div class="rcp-left-div rcp-float-left-div">
											<img class="rcp-subscribe-image" src="../img/4.jpg">
										</div>

										<!-- <div id="triangle-left"></div> -->
										<div class="rcp-right-div">
											<a href="#" class="rcp-viewMore">더보기</a>
											<div class="rcp-element-default-position">

												<div class="rcp-subscribe-recipe-profile">
													<img class="rcp-subscribe-profile img-circle"
														src="../img/profile1.jpg">
													<div class="rcp-subscribe-recipe-name">
														<p class="rcp-subscribe-p-tag">
															<b>스테이크 레시피</b>
														</p>
														<h6 style="color: #9a9a9a">2016.08.15 오후 03:20:11 게시됨
														</h6>
													</div>
													<p class="rcp-first-p-margin">빵같아 보이기도 생선같아 보이기도 한다 !</p>

												</div>
												<div class="rcp-subscribe-preview">
													<p class="rcp-subscribe-preview-p-tag">최신 레시피</p>

													<img class="rcp-subscribe-preview-image" src="../img/2.jpg">
													<img class="rcp-subscribe-preview-image" src="../img/3.jpg">
													<img class="rcp-subscribe-preview-image" src="../img/4.jpg">

												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div id="tabs-2">
						<div class="rcp-main-right">
							<div class="rcp-subscribe">
								<div class="rcp-subscribe-detail">

									<div class="rcp-subscribe-column">

										<div class="rcp-left-div rcp-float-left-div">
											<img class="rcp-subscribe-image" src="../img/4.jpg">
										</div>

										<!-- <div id="triangle-left"></div> -->
										<div class="rcp-right-div">
											<a href="#" class="rcp-viewMore">더보기</a>
											<div class="rcp-element-default-position">

												<div class="rcp-subscribe-recipe-profile">
													<img class="rcp-subscribe-profile img-circle"
														src="../img/pika.jpg">
													<div class="rcp-subscribe-recipe-name">
														<p class="rcp-subscribe-p-tag">
															<b>길용이</b>
														</p>
														<h6 style="color: #9a9a9a">2016.08.15 오후 03:20:11 게시됨
														</h6>
													</div>
													<p class="rcp-first-p-margin">빵같아 보이기도 생선같아 보이기도 한다 !</p>

												</div>
												<div class="rcp-subscribe-preview">
													<p class="rcp-subscribe-preview-p-tag">길용이님의 인기레시피</p>

													<img class="rcp-subscribe-preview-image" src="../img/2.jpg">
													<img class="rcp-subscribe-preview-image" src="../img/3.jpg">
													<img class="rcp-subscribe-preview-image" src="../img/4.jpg">

												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="rcp-subscribe">
								<div class="rcp-subscribe-detail">

									<div class="rcp-subscribe-column">

										<div class="rcp-left-div rcp-float-left-div">
											<img class="rcp-subscribe-image" src="../img/4.jpg">
										</div>

										<!-- <div id="triangle-left"></div> -->
										<div class="rcp-right-div">
											<a href="#" class="rcp-viewMore">더보기</a>
											<div class="rcp-element-default-position">

												<div class="rcp-subscribe-recipe-profile">
													<img class="rcp-subscribe-profile img-circle"
														src="../img/profile1.jpg">
													<div class="rcp-subscribe-recipe-name">
														<p class="rcp-subscribe-p-tag">
															<b>암캐</b>
														</p>
														<h6 style="color: #9a9a9a">2016.08.15 오후 03:20:11 게시됨
														</h6>
													</div>
													<p class="rcp-first-p-margin">빵같아 보이기도 생선같아 보이기도 한다 !</p>

												</div>
												<div class="rcp-subscribe-preview">
													<p class="rcp-subscribe-preview-p-tag">고재현님의 인기레시피</p>

													<img class="rcp-subscribe-preview-image" src="../img/2.jpg">
													<img class="rcp-subscribe-preview-image" src="../img/3.jpg">
													<img class="rcp-subscribe-preview-image" src="../img/4.jpg">

												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<section class="rcp-pageright">
			<div>
				<div class="rcp-Vst-write">
					<div class="inputWrite">
						<textarea id="rcp-rpcontent" rows="3" cols="25"
							style="resize: none;"></textarea>
						<button id="rcp-rpBtn" class="rcp-Vst-inputBtn btn btn-default">등록</button>
					</div>
				</div>
			</div>
			<section class="Vst" id="Vst">
				<!-- 방명록  -->
			</section>
		</section>
		<div style="height: 1100px;"></div>
		<div id="quick"
			style="position: absolute; top: 350px; border: solid 3px #6799FF; width: 150px; height: 480px; text-align: center; color: #6799FF;">
			최근 방문한 페이지</div>
	</section>
	<script src="node_modules/jquery/dist/jquery.min.js"></script>
	<script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
	<script src="js/template/jquery-ui-1.12.0/jquery-ui.min.js"></script>
	<script src="node_modules/handlebars/dist/handlebars.min.js"></script>

	<script src="js/community.js"></script>

	<script id="visitor-template" type="text/x-handlebars-template">
  {{#each data}}
    <div class="rcp-Vst" name="rcp-Vst">
          <div class="rcp-Vst-top">
            <img class="rcp-Vst-img img-circle" src="/img/pika.jpg" />
            <div class="rcp-Vst-common">
              <span id="editBtn1"><a href="#"><img class="vstUpdateBtn"
                src="/img/vstUpdateBtn.png"></a></span> 
              <a href="#"><img class="vstDeleteBtn" name="vstDeleteBtn" data-index="{{visitorNo}}"
                src="/img/vstDeleteBtn.png"></a> <span id="rcp-Vst-id" class="rcp-Vst-id">{{visitorNo}}</span><br>
              &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp<span id="rcp-Vst-time">{{visitorDate}}</span>
            </div>
          </div>
          <div class="rcp-Vst-bottom" id="vst-contents">
            <div class="rcp-Vst-contents">
              <p id="vContent">{{visitorContent}}</p>
            </div>
          </div>
            <div class="rcp-Vst-slotRp">
              <!---->
            </div>
          </div>
        </div>

  {{/each}}
  </script>
	<script>
    var sourceVisitor = $('#visitor-template').html();
    var templateVisitor = Handlebars.compile(sourceVisitor);
    
    loadVisitor();
    
    function loadVisitor(){
      $.ajax({
        url :'/visitor/list.json',
        dataType : 'json',
        method : 'get',
        success : function(result) {
          if (result.status != 'success') {
            alert('실행 중 오류 발생');
            return;
          }

          $('#Vst').append(templateVisitor(result));
        },
        error : function() {
          alert('서버 요청 오류!...')
        }
      }); 
    }  
      $(document).on('click','.vstDeleteBtn',function(event) {
    	  if (confirm("게시물을 삭제하시겠습니까?")) {
    		  $.getJSON('visitor/delete.json?no=' + $(this).attr('data-index'),
    		           function(result) {
    		          if (result.status != 'success') {
    		              alert('게시물 삭제 오류');
    		              return;
    		            }
    		          $(this).parent().parent().parent().parent().remove();
    		          $('#Vst>').remove();
    		            loadVisitor();
    		  });
    	  } else{
              return;
        }
     });
  </script>
</body>
</html>