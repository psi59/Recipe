<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ranking</title>

<link rel="stylesheet"
  href="js/template/jquery-ui-1.12.0/jquery-ui.min.css">
<link rel="stylesheet"
  href="node_modules/bootstrap/dist/css/bootstrap.min.css">

<!-- 사용자 정의 css -->
<!-- <link rel="stylesheet" href="css/rank.css"> -->
<link rel="stylesheet" href="css/chefCard.css">
<link rel="stylesheet" href="css/rankTabs.css">
<link rel="stylesheet" href="css/rankingpage.css">
<style>

</style>
</head>
<body>
  <nav>
    <div class="nav-container col-12">
      <p>Ranking Page</p>
      <ul>
        <li><a id="s1" href="#1">Home</a></li>
        <li><a id="s2" href="#2">Chef Ranking</a></li>
        <li><a id="s3" href="#3">Recipe Ranking</a></li>
      </ul>
    </div>
  </nav>

  <section id="1" class="home">
    <h1>Best Chef</h1>
    <!-------------------------------- Rank List --------------------------------->
    <section id="rcp-main-rank">

      <div class="tabs-left">
        <ul class="nav nav-tabs">
          <li class="active"><a href="#rcp-chef-rank" data-toggle="tab">
              <!--  <img class="rcp-rank-icon" src="img/cooker.png"> -->
          </a></li>
        </ul>
        <div class="tab-content">
          <!---------------- Chef Rank --------------------->
          <div class="row tab-pane active" id="rcp-chef-rank"></div>
        </div>
        <!-- /tab-content -->
      </div>
      <!-- /tabbable -->
    </section>

    <!------------------------- Rank List ------------------------------>
  </section>
  <section id="2">
    <h1>Chef Ranking</h1>
    <div class="wrapper">

      <div class="row rcp-font-title">
        <div class="col-md-2">Rank</div>
        <div class="col-md-2">Chef 이름</div>
        <div class="col-md-2">레시피</div>
        <div class="col-md-2">구독자</div>
        <div class="col-md-2">이달의 Point</div>
        <div class="col-md-2">Total Point</div>
      </div>
      <div class="rcp-title">
        <hr />
      </div>
      <div id="chefRanking"></div>
    </div>

  </section>
  <section id="3">
    <h1>Recipe Ranking</h1>
    <div class="wrapper">

      <div class="row rcp-font-title">
        <div class="col-md-2">Rank</div>
        <div class="col-md-2">Recipe 이름</div>
        <div class="col-md-2">좋아요</div>
        <div class="col-md-2">스크랩</div>
        <div class="col-md-2">이달의 Point</div>
        <div class="col-md-2">Total Point</div>
      </div>
      <div class="rcp-title">
        <hr />
      </div>
      <div id="recipeRanking"></div>
    </div>

  </section>
  <footer>
    <h1>Thanks for Viewing!</h1>
    <h3>yongyi1587@naver.com</h3>
    <p>RecipeMaster</p>
    <p>recipemaster.com</p>
  </footer>
  <a id="toTop" href="#1"><div class="to-top"></div></a>
  <!-- js -->
  <script src="node_modules/jquery/dist/jquery.min.js"></script>
  <script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
  <script src="js/template/jquery-ui-1.12.0/jquery-ui.min.js"></script>
  <script src="node_modules/handlebars/dist/handlebars.min.js"></script>
  <script src="js/chefCard.js"></script>
  <script src="js/waypoints.min.js"></script>
  <script id="chef-card-template" type="text/x-handlebars-template">
  {{#each data}}
  <!-- 쉐프카드 -->          
  <figure class="snip1344">
   <img src="img/food01_1.png" alt="profile-sample1" class="background" />
   <img src="img/ic_launcher.png" alt="profile-sample1" class="profile" />
   <img src="img/medal1.png" alt="profile-sample1" class="medal" />
   <figcaption>
    <h3>{{userName}}</h3>           
      <div>{{intro}}</div>
      <div>{{role}}</div>
   </figcaption>
  </figure>
  {{/each}}
</script>
  <script id="chef-rank-template" type="text/x-handlebars-template">
{{#each data}}
      <div class="row rcp-font">
        <div class="col-md-2">Rank</div>
        <div class="col-md-2">{{userName}}</div>
        <div class="col-md-2">레시피 등록수</div>
        <div class="col-md-2">구독자 수</div>
<div class="col-md-2">이달의 Point</div>
        <div class="col-md-2">Total Point</div>
        <hr/>
      </div>
  {{/each}}
  </script>
  <script>
    var sourceChef = $('#chef-rank-template').text();
    var templateChef = Handlebars.compile(sourceChef);
    loadChefRanking();

    function loadChefRanking() {
      $.ajax({
        url : 'user/rank.json',
        dataType : 'json',
        method : 'get',
        success : function(result) {
          if (result.status != 'success') {
            alert('실행중 오류 발생');
            return;
          }
          var list = result.data;
          $('#chefRanking').append(templateChef(result));
        },
        error : function() {
          alert('서버 요청 오류');
        }
      });
    }
  </script>
  <script id="recipe-rank-template" type="text/x-handlebars-template">
{{#each data}}
      <div class="row rcp-font">
        <div class="col-md-2">Rank</div>
        <div class="col-md-2">{{recipeName}}</div>
        <div class="col-md-2">좋아요 수</div>
        <div class="col-md-2">스크랩 수</div>
<div class="col-md-2">이달의 Point</div>
        <div class="col-md-2">Total Point</div>
        <hr/>
      </div>
  {{/each}}
  </script>
  <script>
    var sourceRcp = $('#recipe-rank-template').text();
    var templateRcp = Handlebars.compile(sourceRcp);
    loadRcpRanking();

    function loadRcpRanking() {
      $.ajax({
        url : 'recipe/rank.json',
        dataType : 'json',
        method : 'get',
        success : function(result) {
          if (result.status != 'success') {
            alert('실행중 오류 발생');
            return;
          }
          var list = result.data;
          $('#recipeRanking').append(templateRcp(result));
        },
        error : function() {
          alert('서버 요청 오류');
        }
      });
    }
  </script>
  <script>
    //Default active on home
    $('#s1').addClass("active");

    /*
    Smooth scrolling
     */
    $("#s1").click(function() {
      $('html, body').animate({
        scrollTop : $("#1").offset().top - 65
      }, 1000);
      return false;
    });

    $("#s2").click(function() {
      $('html, body').animate({
        scrollTop : $("#2").offset().top - 100
      }, 1000);
      return false;
    });

    $("#s3").click(function() {
      $('html, body').animate({
        scrollTop : $("#3").offset().top - 100
      }, 1000);
      return false;
    });


    $("#toTop").click(function() {
      $('html, body').animate({
        scrollTop : $("#1").offset().top - 65
      }, 1000);
      return false;
    });
    /*$('#2').waypoint(function(event, direction) {

      $(".nav-container ul li").children().removeClass("active");
      $("#s2").addClass("active");
      
      if (direction === 'down') {
        offset = 90;
      } 
      else {
        offset = 20;
      }
    });*/

    /*
    Using jquery waypoints to change active on scroll
     */
    $('#2').waypoint(function() {

      $(".nav-container ul li").children().removeClass("active");
      $("#s2").addClass("active");

    }, {
      offset : 101
    });

    $('#3').waypoint(function() {
      $(".nav-container ul li").children().removeClass("active");
      $("#s3").addClass("active");
    }, {
      offset : 101
    });


    $('#1').waypoint(function() {
      $(".nav-container ul li").children().removeClass("active");
      $("#s1").addClass("active");
    }, {
      offset : 0
    });

    $('#2').waypoint(function() {
      $(".to-top").addClass("visible");
    }, {
      offset : 100
    });

    $('#1').waypoint(function(event, direction) {
      $(".to-top").removeClass("visible");
    }, {
      offset : 30
    });
  </script>
</body>
</html>