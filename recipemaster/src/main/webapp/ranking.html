<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ranking</title>

<link rel="stylesheet"
  href="js/template/jquery-ui-1.12.0/jquery-ui.min.css">
<link rel="stylesheet"
  href="node_modules/bootstrap/dist/css/bootstrap.min.css">

<!-- 사용자 정의 css -->
<!-- <link rel="stylesheet" href="css/rank.css"> -->
<link rel="stylesheet" href="css/rankingpage.css">
<link rel="stylesheet" href="css/font-awesome.min.css">
<style>
</style>
</head>
	<body>
	  <nav>
	  <div class="row">
	   <div class="col-md-1"><a href="index.html"><img class="rcp-gomain" src="img/gohome.png"></a>
      </div>
	    <div class="nav-container col-md-11 rcp-topbar">
	      <ul>
	        <li><a id="s1" href="#1">Best Chef</a></li>
	        <li><a id="s2" href="#2">Chef Ranking</a></li>
	        <li><a id="s3" href="#3">Recipe Ranking</a></li>
	      </ul>
	    </div>
	    </div>
	  </nav>
 <!-------------------------------- Rank List --------------------------------->
  <section id="1" class="home">
    <h1>Best Chef</h1>
    <div id="rcp-chef-rank">
    
    </div>
    <!------------------------- Rank List ------------------------------>
  </section>
  <section id="2">
    <h1>Chef Ranking</h1>
    <div class="wrapper">
      <div class="row rcp-font-title">
       <br/><br/>
        <div class="col-md-2">Rank</div>
        <div class="col-md-2">Chef 이름</div>
        <div class="col-md-2">레시피 수</div>
        <div class="col-md-2">구독자 수</div>
        <div class="col-md-2">좋아요 수</div>
        <div class="col-md-2">Total Point</div>
      </div>
      <div class="rcp-title">
        <hr />
      </div>
      <div id="chefRanking"></div>
    </div>
    <div><br/><h4 style="color:black;">
    Total Point : 레시피 1개 : 5 Point / 구독자수 1명 : 3 Point / 좋아요 1개 : 2 Point</h4></div>
  </section>
  <section id="3">
    <h1>Recipe Ranking</h1>
    <div class="wrapper">

      <div class="row rcp-font-title">
        <div class="col-md-12"><br/></div>
        <div class="col-md-12"><br/></div>
        <div class="col-md-2">Rank</div>
        <div class="col-md-2">Recipe 이름</div>
        <div class="col-md-2">좋아요</div>
        <div class="col-md-2">스크랩</div>
        <div class="col-md-2">조회수</div>
        <div class="col-md-2">Total Point</div>
      </div>
      <div class="rcp-title">
        <hr />
      </div>
      <div id="recipeRanking"></div>
    </div>
    <div><br/><h4 style="color:black;">
    Total Point : 좋아요 1개 : 3 Point / 스크랩 1개 : 3 Point / 조회수 1개 : 1 Point</h4></div>
  </section>
  <footer>
    <h1>Thanks for Viewing!</h1>
    <h3>yongyi1587@naver.com</h3>
    <p>RecipeMaster</p>
    <p>recipemaster.com</p>
  </footer>
  <a id="toTop" href="#1"><div class="to-top"></div></a>
  <!-- js -->
  <script src="node_modules/jquery/dist/jquery.min.js"></script>
  <script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
  <script src="js/template/jquery-ui-1.12.0/jquery-ui.min.js"></script>
  <script src="node_modules/handlebars/dist/handlebars.min.js"></script>
  
  <!--yongyi  -->
  <script src="js/jquery.bpopup.min.js"></script>
  <script src="js/common/chefCard.js"></script>
  <script src="js/waypoints.min.js"></script>
  <script src="js/recipeDetail.js"></script>
  <script src="js/rankingpage.js"></script>
  <script id="chef-card-template" type="text/x-handlebars-template">
{{#each data}}
<div class="fresh-ui-wrap col-md-3">
 {{#if @first}}    
    <img class="rcp-rankmedal" src="/img/medal1.png"/>
  {{else if @last}}    
    <img class="rcp-rankmedal" src="/img/medal3.png"/>
  {{else}}   
    <img class="rcp-rankmedal" src="/img/medal2.png"/>
  {{/if}}
  
  <div class="fresh-ui">
    <div class="header">
      <div class="photo">     
      {{#if @first}}
        <img src="img/profileimg.jpg">
      {{else if @last}}
        <img src="img/profile.jpg">
      {{else}}
        <img src="img/profile2.jpg">
      {{/if}}
      </div>
      <div class="social">
        <div class="list">
          <a data-title="Recipe">{{recipeCount}}</a>
          <a data-title="구독자">{{subsCount}}</a>
          <a data-title="좋아요">{{likeCount}}</a>
          <a data-title="Total">{{totalPoint}}</a>
        </div>
      </div>
    </div>
    <div class="content">
          
      <div class="name"><input type="hidden" value="{{email}}">
                   <a href="#" class="rcp-userName">{{userName}}</a></div>
      <div class="job-title">Master Chef </div>
      <p class="text">{{email}}</p>
      <div class="list clearfix">
        <p>소개</p>
        <p>- {{intro}}</p>
      </div>
    </div>
  </div>
</div>
  {{/each}} 
  </script>
  
  <script id="chef-rank-template" type="text/x-handlebars-template">
  {{#each data}}
      <div class="row rcp-font hover effect8">
        <div class="col-md-2">{{rownum}}</div>
        <div class="col-md-2">
          <div class="name"><input type="hidden" value="{{email}}">
                   <a href="#" class="rcp-userName">{{userName}}</a></div>
        </div>
        <div class="col-md-2">{{recipeCount}} 개</div>
        <div class="col-md-2">{{subsCount}} 명</div>
        <div class="col-md-2">{{likeCount}} 개</div>
        <div class="col-md-2">{{totalPoint}} 점</div>
</div>
  {{/each}}
  </script>
  <script>
    var sourceChef = $('#chef-rank-template').text();
    var templateChef = Handlebars.compile(sourceChef);
    loadChefRanking();

    function loadChefRanking() {
      $.ajax({
        url : 'user/rank.json',
        dataType : 'json',
        method : 'get',
        success : function(result) {
          if (result.status != 'success') {
            alert('실행중 오류 발생');
            return;
          }
          var list = result.data;
          $('#chefRanking').append(templateChef(result));
          console.log(result.data)
        },
        error : function() {
          alert('서버 요청 오류');
        }
      });
    }
  </script>
  <script id="recipe-rank-template" type="text/x-handlebars-template">
    {{#each data}}
      <div class="row rcp-font hover effect8">
        <div class="col-md-2">{{rownum}}</div>
        <div class="col-md-2">
          <a href="#" class="detail" style="z-index:9999">{{recipeName}} </a> 
          <input type="hidden" name="recipeNo" value="{{recipeNo}}"></div>
        <div class="col-md-2">{{countLike}} 개</div>
        <div class="col-md-2">{{countScrap}} 개</div>
        <div class="col-md-2">{{hits}} 개</div>
        <div class="col-md-2">{{totalPoint}} 점</div>
      </div>
  {{/each}}
  </script>
  <script>
    var sourceRcp = $('#recipe-rank-template').text();
    var templateRcp = Handlebars.compile(sourceRcp);
    loadRcpRanking();

    function loadRcpRanking() {
      $.ajax({
        url : 'recipe/rank.json',
        dataType : 'json',
        method : 'get',
        success : function(result) {
          if (result.status != 'success') {
             alert('실행중 오류 발생');
            return;
          }
          var list = result.data;
          $('#recipeRanking').append(templateRcp(result));
        },
        error : function() {
           alert('서버 요청 오류');
        }
      });
    }
  </script>
</body>
</html>