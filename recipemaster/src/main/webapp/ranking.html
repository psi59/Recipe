<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ranking</title>

<link rel="stylesheet"
	href="js/template/jquery-ui-1.12.0/jquery-ui.min.css">
<link rel="stylesheet"
	href="node_modules/bootstrap/dist/css/bootstrap.min.css">
<link rel="stylesheet"
  href="/node_modules/sweetalert/dist/sweetalert.css">
<link rel="stylesheet"
  href="node_modules/bxslider/dist/jquery.bxslider.css">
<!-- 사용자 정의 css -->
<!-- <link rel="stylesheet" href="css/rank.css"> -->
<link rel="stylesheet" href="css/rankingpage.css">
<link rel="stylesheet" href="css/userinfobox.css">
<link rel="stylesheet" href="css/common/signup.css">
<link rel="stylesheet" href="css/common.css">
<link rel="stylesheet" href="css/font-awesome.min.css">
<link rel="stylesheet" href="css/updateImg.css">
<style>
</style>
</head>
<body>
	<nav>
		<div class="row">
			<!-- <div class="col-md-1"><a href="index.html"><img class="rcp-gomain" src="img/gohome.png"></a> -->
		</div>
		<div class="nav-container col-md-11 rcp-topbar ranking-bar-infobox">
			<ul>
			  <li><a href="/index.html">Home</a></li>
				<li><a id="s1" href="#1">Best Of Chef</a></li>
				<li><a id="s2" href="#2">Chef Ranking</a></li>
				<li><a id="s3" href="#3">Recipe Ranking</a></li>
			</ul>
			<div
				class="col-md-4 col-sm-4 col-xs-4 signin rcp-signin text-right navbar-nav">
				<span id="signUpTopBtn" class="rcp-btn-default-2">회원가입</span>&nbsp;
				&nbsp; <span id="topLoginBtn" class="rcp-btn-default-2">로그인</span>
				<a href="#" id="loginIcon" class="ranking-barimg"></a>
			</div>
			<div id="profileView" class="main-nav__dropdown profile-dropdown">
          <div class="rcp-outline">
            <div>
              <a href="#0" class="dropdown__header"><img id="profileImg"
                class="rcp-img img-circle" src="img/Chef3.jpg" /></a> <a
                id="profileEmail" href="#"
                class="dropdown__header rcp-infobox-text"></a>
              <h6 id="profileName" class="rcp-nickname"></h6>
              <a href="#0" class="dropdown__header"> <span
                id="profileGrade" class="dropdown__title rcp-infobox-text">
                  <img src="img/star.png"> Master Chef
              </span>
              </a>
              <div id=Btn align="center">
                <button id="userInfoEditBtn" type="button"
                  class="btn btn-default rcp-btn-nav">정보수정</button>
                <button id="logoutBtn" type="button"
                  class="btn btn-default rcp-btn-nav">로그아웃</button>
              </div>
            </div>
            
            <a href="/mypage.html"><button class="goMyPageBtn btn btn-default rcp-btn-nav">MyPage</button></a>
            <a href="/writerecipe.html"><button class="goWriteRcpBtn btn btn-default rcp-btn-nav">Recipe 작성</button></a>
          </div>
        </div>
		</div>
	</nav>
	<div id='signup-pop-up-banner'>
    <div class="rcp-section">
      <span>회원 가입</span>
    </div>
    <div class="rcp-laytop rcp-laytop2"></div>
    <div class="rcp-innnersec">
      <div class="rcp-mar rcp-info">

        <div id="signup-e-mail-div"
          class="form-group has-warning has-feedback">
          <input id="signup-e-mail" type="text" class="form-control"
            placeholder="E-mail 입력"> <span id="signup-e-mail-span"
            class="glyphicon glyphicon-warning-sign form-control-feedback"
            aria-hidden="true"></span> <label id="signup-e-mail-label"
            class="control-label"></label>
        </div>

        <div id="signup-userName-div"
          class="form-group has-warning has-feedback">
          <input id="signup-userName" type="text" class="form-control"
            placeholder="닉네임 입력"> <span id="signup-userName-span"
            class="glyphicon glyphicon-warning-sign form-control-feedback"
            aria-hidden="true"></span> <label id="signup-userName-label"
            class="control-label"></label>
        </div>

        <div id="signup-password-div"
          class="form-group has-error has-feedback">
          <input id="signup-password" type="password" class="form-control"
            placeholder="비밀번호 입력"> <span id="signup-password-span"
            class="glyphicon glyphicon-remove form-control-feedback"
            aria-hidden="true"></span> <label id="signup-password-label"
            class="control-label"></label>
        </div>

        <div id="signup-passwordCheck-div"
          class="form-group has-error has-feedback">
          <input id="signup-passwordCheck" type="password"
            class="form-control" placeholder="비밀번호 확인"> <span
            id="signup-passwordCheck-span"
            class="glyphicon glyphicon-remove form-control-feedback"
            aria-hidden="true"></span> <label id="signup-passwordCheck-label"
            class="control-label"></label>
        </div>

      </div>

      <div class="rcp-bottext">
        <label class="checkbox-inline"> <input type="checkbox"
          id="agrchk" value="option1">서비스약관과 개인정보수집이용에 동의합니다.
        </label>
      </div>
    </div>
    <div class="rcp-sign-membership">
      <span id="signup-addBtn">가입</span> <span id="signup-resetBtn">취소</span>
    </div>
  </div>
  <!--준모_login------------------------------------------------------------------------------- -->
  <div id='login-pop-up-banner'>
    <div class="rcp-section">
      <span>로그인</span>
    </div>
    <div class="rcp-laytop rcp-laytop2"></div>
    <div class="rcp-innnersec">
      <div id="loginInputBox" class="rcp-mar rcp-info"
        style="height: 110px;">
        <input class="form-control" type="text" id="userEmail" name="email"
          placeholder="아이디 입력" /> <br /> <input class="form-control"
          type="password" id="userPassword" name="password"
          placeholder="비밀번호 입력" />
      </div>
    </div>
    <div class="rcp-sign-membership" style="margin-top: 50px;">
      <a href="#" id="userLogin"><span>로그인</span></a>
    </div>
  </div>
  <!--  -->
  <div id='editUserInfo-pop-up-banner'>
    <form action="user/update.json" method="post" id="updateUserForm"
      enctype="multipart/form-data">
      <input type="hidden" name="userNo" id="updateFormUserNo"> <input
        type="hidden" name="email" id="updateFormEmail">
      <div class="rcp-laytop">
        <!--유저 이미지 업로드 --용이  !!!!!enctype?????16.08.12-->
        <div class="rcp-up-preview img-wrapper col-md-1"></div>
        <div class="file-upload-wrapper">
          <input id="profileImage" type="file" name="profileImage"
            class="file-upload-native" accept="image/*" /> <input type="text"
            disabled placeholder="이미지" class="file-upload-text" />
        </div>
        <!--유저 이미지 업로드 끝--용이  -->
        <div class="col-md-11 rcp-laytext">
          <h4 id="updateBoxName"></h4>
          <h5 id="updateBoxGrade">Master Chef</h5>
          <h5 id="updateBoxEmail"></h5>
        </div>
      </div>
      <div class="rcp-section">
        <span>회원정보수정</span>
      </div>
      <div class="rcp-innnersec">
        <div id="beforePwd-div"
          class="rcp-mar rcp-info form-group form-group-md has-warning has-feedback">
          <input class="form-control" type="password" id="beforePwd"
            name="beforePassword" placeholder="이전비밀번호 입력">
        </div>

        <div id="afterPwd-div"
          class="rcp-mar rcp-info form-group form-group-md has-warning has-feedback">
          <input class="form-control" type="password" id="afterPwd"
            name="password" placeholder="변경비밀번호 입력">
        </div>

        <div id="afterPwdcf-div"
          class="rcp-mar rcp-info form-group form-group-md has-warning has-feedback">
          <input class="form-control" type="password" id="afterPwdcf"
            placeholder="변경비밀번호 확인">
        </div>

        <div
          class="rcp-mar rcp-info form-group form-group-md has-success has-feedback">
          <textarea class="form-control rcp-tara" rows="5rem" cols="30rem"
            id="introduce" name="intro" placeholder="자기소개를 입력해주세요"></textarea>
        </div>
      </div>
      <div class="rcp-sign-membership">
        <!-- <button id="updateUserInfo" type="submit">확인</button> -->
        <a href="#"><span id="updateUserInfo">확인</span></a> <a href="#"><span
          id="updateUserReset">취소</span></a>
      </div>
    </form>
  </div>
	<!-------------------------------- Rank List --------------------------------->
	<section id="1" class="home">
		<h1>Best Of Chef</h1>
		<div class="rankingWrapper">
			<div id="rcp-chef-rank"><h2>Total Ranking</h2></div>
			<div id="rcp-chef-rank-today"><h2>Today Ranking</h2></div>
			<div id="rcp-chef-rank-month"><h2>Month Ranking</h2></div>
		</div>
		<!------------------------- Rank List ------------------------------>
	</section>
	<section id="2">
		<h1>Chef Ranking</h1>
		<div class="wrapper">
			<div class="row rcp-font-title">
				<br /> <br />
				<div class="col-md-2">Rank</div>
				<div class="col-md-2">Chef 이름</div>
				<div class="col-md-2">레시피 수</div>
				<div class="col-md-2">구독자 수</div>
				<div class="col-md-2">Total Point</div>
				<div class="col-md-2">등급</div>
			</div>
			<div class="rcp-title">
				<hr />
			</div>
			<div id="chefMyRanking" class="rcp-myranking"></div>
			<div id="chefRanking"></div>
			<!-- <img class="rcp-rankmedal-small1" src="/img/medal1.png"/>
      <img class="rcp-rankmedal-small2" src="/img/medal2.png"/>
      <img class="rcp-rankmedal-small3" src="/img/medal3.png"/> -->
		</div>
		<div>
			<br />
			<h4 style="color: black;">Total Point : 레시피 1개 : 10 Point / 구독자수
				1명 : 5 Point</h4>
		</div>
	</section>
	<section id="3">
		<h1>Recipe Ranking</h1>
		<div class="wrapper">

			<div class="row rcp-font-title">
				<div class="col-md-12">
					<br />
				</div>
				<div class="col-md-12">
					<br />
				</div>
				<div class="col-md-2">Rank</div>
				<div class="col-md-2">Recipe 이름</div>
				<div class="col-md-2">좋아요</div>
				<div class="col-md-2">스크랩</div>
				<div class="col-md-2">조회수</div>
				<div class="col-md-2">Total Point</div>
			</div>
			<div class="rcp-title">
				<hr />
			</div>
			<div id="recipeRanking"></div>
		</div>
		<div>
			<br />
			<h4 style="color: black;">Total Point : 좋아요 1개 : 3 Point / 스크랩
				1개 : 3 Point / 조회수 1개 : 1 Point</h4>
		</div>
	</section>
	<footer>
		<h1>Thanks for Viewing!</h1>
		<h3>yongyi1587@naver.com</h3>
		<p>Cookle</p>
		<p>Cookle.com</p>
	</footer>
	<a id="toTop" href="#1"><div class="to-top"></div></a>
	<!-- js -->
	<script src="node_modules/jquery/dist/jquery.min.js"></script>
	<script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
	<script src="js/template/jquery-ui-1.12.0/jquery-ui.min.js"></script>
	<script src="node_modules/handlebars/dist/handlebars.min.js"></script>
  <script src="node_modules/sweetalert/dist/sweetalert.min.js"></script>
  <script src="node_modules/sweetalert/dist/sweetalert-dev.js"></script>
  <script src="node_modules/bxslider/dist/jquery.bxslider.min.js"></script>
	<!--yongyi  -->
	<script src="js/jquery.bpopup.min.js"></script>
	<script src="js/common/chefCard.js"></script>
	<script src="js/waypoints.min.js"></script>
	<script src="js/login.js"></script>
	<!-- <script src="js/common.js"></script> -->
	<script src="js/common_topsearchbar.js"></script>
	<script src="js/updateUser.js"></script>
	<script src="js/recipeDetail.js"></script>
	<script src="js/rankingpage.js"></script>
  <script id="chef-card-template" type="text/x-handlebars-template">
{{#each data}}
<div class="fresh-ui-wrap col-md-3">
 {{#if @first}}    
    <img class="rcp-rankmedal" src="/img/medal1.png"/>
  {{else if @last}}    
    <img class="rcp-rankmedal" src="/img/medal3.png"/>
  {{else}}   
    <img class="rcp-rankmedal" src="/img/medal2.png"/>
  {{/if}}
  
  <div class="fresh-ui">
    <div class="header">
      <div class="photo">     
      <a href="#" class="rcp-userName"><input type="hidden" class="rcp-hidden-email" value="{{user.email}}">
             <img src="img/profileImg/{{image}}" class="img-circle rcp-profile"></a>
      </div>
      <div class="social">
        <div class="list">
          <a data-title="Recipe">{{recipeCount}}</a>
          <a data-title="구독자">{{subsCount}}</a>
          <!--<a data-title="좋아요">{{likeCount}}</a>-->
          <a data-title="Total">{{totalPoint}}</a>
        </div>
      </div>
    </div>
        <div class="content introBox">
          <div class="name">
                   <p class="rcp-userName1">{{userName}}</p></div>
                    <p class="text">{{email}}</p>      
                  <div class="rcp-ranking"><h4>{{grade}}</h4></div>
          <div class="list clearfix">
        <p class="introfont">{{intro}}</p>
        </div>
        <div class="cardbtn">
         <button type="button" class="btn btn-default rcp-imp">
              <a href="/mypage.html?{{email}}" class="visitbtn">방문하기</a></button>
              {{#if status}}
              <button type="button" name="subscribeComplete" class="btn btn-default rcp-imp rank-scs" data-email="{{email}}" >구독중</button>
              {{else}}
              <button type="button" class="btn btn-default rcp-imp rank-scs" data-email="{{email}}" >구독하기</button>
               {{/if}}
      </div>
    </div>
  </div>
</div>
  {{/each}} 
  </script>

	<script id="chef-rank-template" type="text/x-handlebars-template">
  {{#each data}}
      <div class="row rcp-font hover effect8">
        <div class="col-md-2">{{rownum}}
      </div>
        <div class="col-md-2">
          <div class="name"><input type="hidden" value="{{email}}">
                   <a href="#" class="rcp-userName">{{userName}}</a></div>
        </div>
        <div class="col-md-2">{{recipeCount}} 개</div>
        <div class="col-md-2">{{subsCount}} 명</div>
        <div class="col-md-2">{{totalPoint}} 점</div>
        <div class="col-md-2 ">{{grade}}</div>
</div>
  {{/each}}
  </script>
  <script id="chef-myrank-template" type="text/x-handlebars-template">
  {{#each data}}
      <div class="row rcp-font hover effect8">
        <div class="col-md-2">{{rownum}}
      </div>
      <div class="col-md-2">
        <div class="name"><input type="hidden" value="{{email}}">
                   <a href="#" class="rcp-userName">{{userName}}</a></div>
        </div>
        <div class="col-md-2">{{recipeCount}} 개</div>
        <div class="col-md-2">{{subsCount}} 명</div>
        <div class="col-md-2">{{totalPoint}} 점</div>
        <div class="col-md-2 ">{{grade}}</div>
      </div>
  {{/each}}
  </script>
	<script>
    var sourceChef = $('#chef-rank-template').text();
    var templateChef = Handlebars.compile(sourceChef);
    loadChefRanking();

    function loadChefRanking() {
      $.ajax({
        url : 'user/rank.json',
        dataType : 'json',
        method : 'get',
        success : function(result) {
          if (result.status != 'success') {
            alert('실행중 오류 발생');
            return;
          }
          var list = result.data;
          $('#chefRanking').append(templateChef(result));
          console.log(result.data);
        },
        error : function() {
          alert('서버 요청 오류');
        }
      });
    }
  </script>
	<script id="recipe-rank-template" type="text/x-handlebars-template">
    {{#each data}}
      <div class="row rcp-font hover effect8">
        <div class="col-md-2">{{rownum}}</div>
        <div class="col-md-2">
          <a href="#" class="detail rcp-rcpName" style="z-index:9999">{{recipeName}} </a> 
          <input type="hidden" name="recipeNo" value="{{recipeNo}}"></div>
        <div class="col-md-2">{{countLike}} 개</div>
        <div class="col-md-2">{{countScrap}} 개</div>
        <div class="col-md-2">{{hits}} 개</div>
        <div class="col-md-2">{{totalPoint}} 점</div>
      </div>
  {{/each}}
  </script>
	<script>
    var sourceRcp = $('#recipe-rank-template').text();
    var templateRcp = Handlebars.compile(sourceRcp);
    loadRcpRanking();

    function loadRcpRanking() {
      $.ajax({
        url : 'recipe/rank.json',
        dataType : 'json',
        method : 'get',
        success : function(result) {
          if (result.status != 'success') {
             alert('실행중 오류 발생');
            return;
          }
          var list = result.data;
          $('#recipeRanking').append(templateRcp(result));
        },
        error : function() {
           alert('서버 요청 오류');
        }
      });
    }
  </script>
    <script>
    var sourceMy = $('#chef-myrank-template').text();
    var template1 = Handlebars.compile(sourceMy);
    loadMyRanking();

    function loadMyRanking() {
      $.ajax({
        url : 'user/myrank.json',
        dataType : 'json',
        method : 'get',
        success : function(result) {
          if (result.status != 'success') {
        	  alert('실패');
            return;
          }
          var list = result.data;
          if(list!=null){
        	  var appendData = '<div class="row rcp-font hover effect8">'
                  +'<div class="col-md-2">My Ranking : '+list.rownum+'</div>'
                  +'<div class="col-md-2"><div class="name">'
                  +'<input type="hidden" value="'+list.email+'">'
                  +'<a href="#" class="rcp-userName">'+list.userName+'</a></div>'
                  +'</div><div class="col-md-2">'+list.recipeCount+' 개</div>'
                  +'<div class="col-md-2">'+list.subsCount+' 명</div>'
                  +'<div class="col-md-2">'+list.totalPoint+' 점</div>'
                  +'<div class="col-md-2 ">'+list.grade+'</div></div>'
                  
                  $('#chefMyRanking').append($(appendData));
          }
          
          console.log(result);
        },
        error : function() {
          alert('서버 요청 오류');
        }
      });
    }
  </script>
	<script>
    $(function() {
      getWeather();
      getRealTimeRank();
      $('#footer').load("../copyright.html");
      
      $('.profile-dropdown:has(.active)').bind('click', function() {

      });

      $(window).bind('scroll', function(e) {
        $('.main-nav__dropdown').removeClass('active');
      });

      $('.dropdown-trigger').on('scroll', function() {
        dropdownClick('.profile-dropdown', '.mobile-menu-dropdown');
      });

      $('.dropdown-trigger--mobile').on('click', function() {
        dropdownClick('.mobile-menu-dropdown', '.profile-dropdown');
      });
    });
  </script>
</body>
</html>